{"version":3,"file":"index.js","sources":["../src/assets/caret-down.jsx","../src/index.js"],"sourcesContent":["import React from 'react'\n\nexport const CaretDownIcon = (props) => {\n  const setStyle = () => {\n    let style\n    switch (props.point) {\n      case 'up':\n        style = {\n          position: 'absolute',\n          color: '#696969',\n          right: '20px',\n          transition: 'all 0.3s',\n          transform: 'rotate(180deg)',\n          height: '16px'\n        }\n        break\n\n      case 'down':\n        style = {\n          position: 'absolute',\n          right: '20px',\n          color: '#696969',\n          transition: 'all 0.3s',\n          height: '16px'\n        }\n        break\n\n      case 'up_white':\n        style = {\n          position: 'absolute',\n          left: '10px',\n          top: '-10px',\n          transform: 'rotate(180deg)',\n          color: '#fff',\n          height: '16px'\n        }\n        break\n    }\n    return style\n  }\n  return (\n    <svg\n      aria-hidden='true'\n      focusable='false'\n      data-prefix='fas'\n      data-icon='caret-down'\n      className='svg-inline--fa fa-caret-down fa-w-10'\n      role='img'\n      xmlns='http://www.w3.org/2000/svg'\n      viewBox='0 0 320 512'\n      height='18px'\n      color={props.color}\n      style={setStyle()}\n    >\n      <path\n        fill='currentColor'\n        d='M31.3 192h257.3c17.8 0 26.7 \n            21.5 14.1 34.1L174.1 354.8c-7.8 \n            7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 \n            213.5 13.5 192 31.3 192z'\n      ></path>\n    </svg>\n  )\n}\n","import React, { useState, useEffect, useRef } from 'react'\nimport styles from './styles.module.css'\nimport { CaretDownIcon } from './assets/caret-down'\n\nexport const ReactCountryDropdown = (props) => {\n  const [countries, setCountries] = useState([])\n  const [countriesCopy, setCountriesCopy] = useState([])\n  const [open, setOpen] = useState(false)\n  const [defaultCountry, setDefaultCountry] = useState({})\n\n  const dropdownRef = useRef(null)\n\n  useEffect(() => {\n    defaultCountrySetter(props.countryCode ? props.countryCode : 'US')\n    preFetchCountries().then((res) => {\n      console.log({ res })\n      setCountries(res)\n      setCountriesCopy(res)\n    })\n\n    document.addEventListener('mousedown', handleClickOutSide)\n  }, [])\n\n  const defaultCountrySetter = (d) => {\n    preFetchCountries().then((countries) => {\n      const defaultC = countries.filter(\n        (country) => country.alpha2Code.toLowerCase() === d.toLowerCase()\n      )\n      setDefaultCountry(defaultC[0])\n    })\n  }\n\n  const preFetchCountries = async () => {\n    const data = await fetch('https://restcountries.com/v2/all')\n    const result = await data.json()\n    return result\n  }\n\n  const handleClickOutSide = (e) => {\n    if (dropdownRef.current && !dropdownRef.current.contains(e.target)) {\n      setOpen(false)\n    }\n  }\n\n  const toggleDropDown = () => {\n    /* reset all countries before closing */\n    if (!open) {\n      setCountries(countriesCopy)\n    }\n    setOpen(!open)\n  }\n\n  const handleCountryClick = (country) => {\n    const result = {\n      name: country?.name,\n      code: country?.alpha2Code,\n      capital: country?.capital,\n      region: country?.region,\n      latlng: country?.latlng\n    }\n    setDefaultCountry(country)\n\n    if (props.onSelect) {\n      props.onSelect(result)\n    }\n\n    /* Hide the dropdown menu on selecting a country */\n    toggleDropDown()\n  }\n\n  const handleSearchInput = (e) => {\n    const input = e.target.value.toLowerCase()\n    let filteredCountries = countriesCopy.filter((i) =>\n      i.name.toLowerCase().includes(input.toLowerCase())\n    )\n    setCountries(filteredCountries)\n  }\n\n  return (\n    <div className={styles.container} ref={dropdownRef}>\n      <div className={styles.dropdown} onClick={toggleDropDown}>\n        <img\n          className={styles.country_flag}\n          src={defaultCountry?.flag}\n          alt={defaultCountry?.name}\n        />\n        <span className={styles.selected_country}>\n          {defaultCountry.alpha2Code}\n        </span>\n        <CaretDownIcon point={open ? 'up' : 'down'} />\n      </div>\n\n      {open && (\n        <div className={styles.dropdown_items_wrapper}>\n          <CaretDownIcon point='up_white' />\n          <div className={styles.input_wrapper}>\n            <input\n              onChange={(e) => handleSearchInput(e)}\n              className={styles.country_search}\n              type='text'\n              placeholder='search coutries...'\n            />\n          </div>\n\n          <div className={styles.dropdown_items}>\n            {countries.map((i, index) => {\n              return (\n                <div\n                  key={index}\n                  onClick={() => handleCountryClick(i)}\n                  className={styles.dropdown_item}>\n                  <img className={styles.country_flag} src={i.flag} alt='' />\n                  <span className={styles.dropdown_item_title}> {i.name}</span>\n                </div>\n              )\n            })}\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":["CaretDownIcon","props","setStyle","style","point","position","color","right","transition","transform","height","left","top","React","createElement","focusable","className","role","xmlns","viewBox","fill","d","ReactCountryDropdown","_useState","useState","countries","setCountries","_useState2","countriesCopy","setCountriesCopy","_useState3","open","setOpen","_useState4","defaultCountry","setDefaultCountry","dropdownRef","useRef","useEffect","defaultCountrySetter","countryCode","preFetchCountries","then","res","console","log","document","addEventListener","handleClickOutSide","defaultC","filter","country","alpha2Code","toLowerCase","Promise","resolve","fetch","data","json","e","reject","current","contains","target","toggleDropDown","handleCountryClick","result","name","code","capital","region","latlng","onSelect","handleSearchInput","input","value","filteredCountries","i","includes","styles","container","ref","dropdown","onClick","country_flag","src","flag","alt","selected_country","dropdown_items_wrapper","input_wrapper","onChange","country_search","type","placeholder","dropdown_items","map","index","key","dropdown_item","dropdown_item_title"],"mappings":"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"}