{"ast":null,"code":"import { toast } from \"react-toastify\";\nimport axios from \"axios\";\n\n// Set up axios instance with base URL and headers\nconst httpClient = axios.create({\n  // baseURL: process.env.REACT_APP_LEVERPAY_API_URL,\n  baseURL: \"https://leverpay-api.azurewebsites.net/api\",\n  // ---DEBUGGING ---\n  //The sign in is not working after click of the signIn button\n  //so here, i am trying to check where the error is from\n  //change the time out from 1seconds to 5 seconds\n  timeout: 5000,\n  headers: {\n    Authorization: \"Bearer \" + localStorage.getItem(\"_jwt\")\n  }\n});\nexport const signIn = async (userData, jwt, setJwt) => {\n  if (!jwt) {\n    const signInURL = \"https://leverpay-api.azurewebsites.net/api/v1/login\";\n    //----DEBUGGING----\n    //check if the request is sent successfully\n    console.log(\"Making API request to:\", signInURL);\n    console.log(\"User data:\", userData);\n    httpClient.post(signInURL, userData).then(response => {\n      // ---DEBUGGING---\n      console.log(\"Response received:\", response);\n      if (response.data.success) {\n        toast.success(`${response.message}`);\n        setJwt(`${response.data.token}`);\n        localStorage.setItem(\"_jwt\", response.data.token);\n        setTimeout(() => {\n          window.location.href = \"/\";\n        }, 2000);\n      } else {\n        toast.error(`${response.message}`);\n      }\n    }).catch(err => {\n      toast.error(err);\n      // ---DEBUGGING---\n      console.error(\"API call error:\", err);\n    });\n  }\n};\nexport const signUp = async ({\n  signupData\n}) => {\n  httpClient.post(\"/v1/user/signup\", signupData).then(response => {\n    if (response.data.status === 200) {\n      toast.success(`${response.data.message}`);\n      localStorage.setItem(\"userEmail\", signupData.email);\n      setTimeout(() => {\n        window.location.href = \"/leverpay-signup/signup-OTP\";\n      }, 2000);\n    } else {\n      toast.error(`${response.data.message}`);\n    }\n  }).catch(error => {\n    console.log(\"Error\", error, \"Sign Up\");\n  });\n};\n\n// VerifyEmail function\nexport const verifyEmail = async verifyData => {\n  httpClient.post(\"/v1/verify-email\").then(response => {\n    if (response.data.status === 200) {\n      // Use response instead of messages\n      toast.success(`${response.data.message}`);\n      setTimeout(() => {\n        window.location.href = \"/signin\";\n      }, 2000);\n    } else {\n      toast.error(`${response.data.message}`);\n    }\n  }).catch(error => {\n    //TODO Handle exception\n    return;\n  });\n};\nexport const getUserProfile = async (jwt, setJwt, setUser) => {\n  httpClient.get(\"/v1/user/get-user-profile\").then(response => {\n    setUser(response.data.data);\n    localStorage.setItem(\"user\", JSON.stringify(response.data.data));\n    console.log(\"user found successfully\");\n  }).catch(err => {\n    console.log(`${err}`);\n  });\n};\nexport const updateUserProfile = async (jwt, userDataUpdate) => {\n  httpClient.post(\"/v1/user/update-user-profile\", userDataUpdate).then(response => {\n    toast.success(response.data.message);\n    setTimeout(() => {\n      window.location.href = \"/\";\n    }, 2000);\n  }).catch(err => {\n    console.log(`${err.message}`);\n  });\n};\n\n// UserResetPassword function\nexport const userResetPassword = async (passwordReset, setJwt) => {\n  httpClient.post(\"/v1/reset-password\", passwordReset).then(response => {\n    if (response.data.success !== false) {\n      toast.success(response.data);\n      setTimeout(() => {\n        window.location.href = \"/signin\";\n        setJwt(\"\");\n      }, 5000);\n    }\n    if (response.data.message === \"Error\") {\n      toast.error(`${response.data.data.new_password}`);\n    } else {\n      toast.error(response.data.message);\n    }\n  }).catch(err => {\n    toast.error(`${err}`);\n  });\n};\nexport const logoutUser = async jwt => {\n  httpClient.get(\"/v1/user/logout\").then(response => {\n    toast.success(response.data.message);\n    localStorage.removeItem(\"user\");\n  }).catch(err => {\n    console.log(`${err.message}`);\n  });\n};\nexport const getCountry = ({\n  setCountry\n}) => {\n  httpClient.get(\"/v1/get-countries\").then(response => {\n    setCountry(response.data.data.map(countries => countries));\n  }).catch(err => {\n    toast.error(err.message);\n  });\n};\nexport const getState = ({\n  countryID,\n  setState\n}) => {\n  httpClient.post(\"https://leverpay-api.azurewebsites.net/api/v1/get-states\", {\n    country_id: countryID\n  }).then(getStates => {\n    setState(getStates.data.data.map(states => states));\n  }).catch(err => {\n    toast.error(err.message);\n  });\n};\nexport const getCities = ({\n  stateID,\n  setCity\n}) => {\n  httpClient.post(\"https://leverpay-api.azurewebsites.net/api/v1/get-cities\", {\n    state_id: stateID\n  }).then(getCities => {\n    setCity(getCities.data.data.map(cities => cities));\n  }).catch(err => {\n    toast.error(err.message);\n  });\n};","map":{"version":3,"names":["toast","axios","httpClient","create","baseURL","timeout","headers","Authorization","localStorage","getItem","signIn","userData","jwt","setJwt","signInURL","console","log","post","then","response","data","success","message","token","setItem","setTimeout","window","location","href","error","catch","err","signUp","signupData","status","email","verifyEmail","verifyData","getUserProfile","setUser","get","JSON","stringify","updateUserProfile","userDataUpdate","userResetPassword","passwordReset","new_password","logoutUser","removeItem","getCountry","setCountry","map","countries","getState","countryID","setState","country_id","getStates","states","getCities","stateID","setCity","state_id","cities"],"sources":["/home/user/Documents/user-dashboard-frontend/src/services/apiService.js"],"sourcesContent":["import { toast } from \"react-toastify\";\nimport axios from \"axios\";\n\n// Set up axios instance with base URL and headers\nconst httpClient = axios.create({\n    // baseURL: process.env.REACT_APP_LEVERPAY_API_URL,\n    baseURL: \"https://leverpay-api.azurewebsites.net/api\",\n    // ---DEBUGGING ---\n    //The sign in is not working after click of the signIn button\n    //so here, i am trying to check where the error is from\n    //change the time out from 1seconds to 5 seconds\n    timeout: 5000,\n    headers: { Authorization: \"Bearer \" + localStorage.getItem(\"_jwt\") },\n});\n\nexport const signIn = async (userData, jwt, setJwt) => {\n    if (!jwt) {\n        const signInURL = \"https://leverpay-api.azurewebsites.net/api/v1/login\";\n        //----DEBUGGING----\n        //check if the request is sent successfully\n        console.log(\"Making API request to:\", signInURL);\n        console.log(\"User data:\", userData);\n\n        httpClient\n            .post(signInURL, userData)\n            .then((response) => {\n                // ---DEBUGGING---\n                console.log(\"Response received:\", response);\n                if (response.data.success) {\n                    toast.success(`${response.message}`);\n                    setJwt(`${response.data.token}`);\n                    localStorage.setItem(\"_jwt\", response.data.token);\n                    setTimeout(() => {\n                        window.location.href = \"/\";\n                    }, 2000);\n                } else {\n                    toast.error(`${response.message}`);\n                }\n            })\n            .catch((err) => {\n                toast.error(err);\n                // ---DEBUGGING---\n                console.error(\"API call error:\", err);\n            });\n    }\n};\n\nexport const signUp = async ({ signupData }) => {\n    httpClient\n        .post(\"/v1/user/signup\", signupData)\n        .then((response) => {\n            if (response.data.status === 200) {\n                toast.success(`${response.data.message}`);\n                localStorage.setItem(\"userEmail\", signupData.email);\n                setTimeout(() => {\n                    window.location.href = \"/leverpay-signup/signup-OTP\";\n                }, 2000);\n            } else {\n                toast.error(`${response.data.message}`);\n            }\n        })\n        .catch((error) => {\n            console.log(\"Error\", error, \"Sign Up\");\n        });\n};\n\n// VerifyEmail function\nexport const verifyEmail = async (verifyData) => {\n    httpClient\n        .post(\"/v1/verify-email\")\n        .then((response) => {\n            if (response.data.status === 200) {\n                // Use response instead of messages\n                toast.success(`${response.data.message}`);\n                setTimeout(() => {\n                    window.location.href = \"/signin\";\n                }, 2000);\n            } else {\n                toast.error(`${response.data.message}`);\n            }\n        })\n        .catch((error) => {\n            //TODO Handle exception\n            return;\n        });\n};\n\nexport const getUserProfile = async (jwt, setJwt, setUser) => {\n    httpClient\n        .get(\"/v1/user/get-user-profile\")\n        .then((response) => {\n            setUser(response.data.data);\n            localStorage.setItem(\"user\", JSON.stringify(response.data.data));\n            console.log(\"user found successfully\");\n        })\n        .catch((err) => {\n            console.log(`${err}`);\n        });\n};\n\nexport const updateUserProfile = async (jwt, userDataUpdate) => {\n    httpClient\n        .post(\"/v1/user/update-user-profile\", userDataUpdate)\n        .then((response) => {\n            toast.success(response.data.message);\n            setTimeout(() => {\n                window.location.href = \"/\";\n            }, 2000);\n        })\n        .catch((err) => {\n            console.log(`${err.message}`);\n        });\n};\n\n// UserResetPassword function\nexport const userResetPassword = async (passwordReset, setJwt) => {\n    httpClient\n        .post(\"/v1/reset-password\", passwordReset)\n        .then((response) => {\n            if (response.data.success !== false) {\n                toast.success(response.data);\n                setTimeout(() => {\n                    window.location.href = \"/signin\";\n                    setJwt(\"\");\n                }, 5000);\n            }\n            if (response.data.message === \"Error\") {\n                toast.error(`${response.data.data.new_password}`);\n            } else {\n                toast.error(response.data.message);\n            }\n        })\n        .catch((err) => {\n            toast.error(`${err}`);\n        });\n};\n\nexport const logoutUser = async (jwt) => {\n    httpClient\n        .get(\"/v1/user/logout\")\n        .then((response) => {\n            toast.success(response.data.message);\n            localStorage.removeItem(\"user\");\n        })\n        .catch((err) => {\n            console.log(`${err.message}`);\n        });\n};\n\nexport const getCountry = ({ setCountry }) => {\n    httpClient\n        .get(\"/v1/get-countries\")\n        .then((response) => {\n            setCountry(response.data.data.map((countries) => countries));\n        })\n        .catch((err) => {\n            toast.error(err.message);\n        });\n};\n\nexport const getState = ({ countryID, setState }) => {\n    httpClient\n        .post(\"https://leverpay-api.azurewebsites.net/api/v1/get-states\", {\n            country_id: countryID,\n        })\n        .then((getStates) => {\n            setState(getStates.data.data.map((states) => states));\n        })\n        .catch((err) => {\n            toast.error(err.message);\n        });\n};\n\nexport const getCities = ({ stateID, setCity }) => {\n    httpClient\n        .post(\"https://leverpay-api.azurewebsites.net/api/v1/get-cities\", {\n            state_id: stateID,\n        })\n        .then((getCities) => {\n            setCity(getCities.data.data.map((cities) => cities));\n        })\n        .catch((err) => {\n            toast.error(err.message);\n        });\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}